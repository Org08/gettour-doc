
# 系統架構

## 定義

### 供應商

本身與飯店業者或其他廠商簽約, 將資料收錄在其系統中.

提供 API 讓第三方整合, 達成搜尋飯店基本資料和即時空房資訊, 以及訂房等服務.

### Adapter

各家系統的欄位定義不一, 所以在匯入資料時, 會經過針對個別供應商設計的 Adapter, 把資料轉換成本地系統的通用格式.

這主要作用於靜態資料. 

### API Tools

承前項. 而即時資料, 如空房資訊, 則會透過前端的 API 元件包裝, 讓開發者可以用一樣的 Function 操作各家供應商定義的同類動作.

### Mapping

在不同系統裡, 可能會有資料內容不同, 但實際上是同義的情況. 例如同一間飯店在不同系統中可能會有不同名稱, 所以需要 Mapping 機制來處理. 

此外也可能有A系統定義比較細, B系統只有大項目的情況. 例如A有三種房型在B都是指同一種. 這也會需要 Mapping 機制處理.

## 流程

### 同步資料

從 `供應商` 撈資料, 經 `Adapter` 轉換成本系統資料, 再經系統初步 `Mapping`, 最後由人工處理系統無法判斷的資料對應.

### 查詢空房

透過前端地圖工具與 `API Tools` 從本地資料找出欲查詢的飯店, 再配合進階篩選條件發送給各供應商, 並依序把收到的回應顯示在前端.

### 訂房/修改/取消

在前端選擇查詢到的特定供應商的特定飯店房間, 把相關資料和操作透過 `API Tools` 發送給供應商. (各供應商的差異會透過 `API Tools` 包裝成通用的)

### 查詢訂房

透過 `API Tools` 查詢本系統資料庫的紀錄, 當需要細節或刷新資料時, 再透過 `API Tools` 像此訂單的供應商查詢即時資料.
